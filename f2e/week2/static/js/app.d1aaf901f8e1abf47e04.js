webpackJsonp([1],{"8Cm6":function(t,e){},"99Ei":function(t,e){},"DL8/":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("zL8q"),o=a.n(i),c=a("gwsl"),s=a.n(c),l=(a("tvR6"),a("Xxa5")),r=a.n(l),h=a("lHA8"),u=a.n(h),d=a("Gu7T"),p=a.n(d),f=a("exGp"),v=a.n(f),g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"head"},[t._m(0),t._v(" "),a("div",{staticClass:"searchBar"},[a("el-input",{attrs:{placeholder:"請輸入景點名稱","prefix-icon":"el-icon-search",clearable:""},on:{change:t.inputChange},model:{value:t.serchBarText,callback:function(e){t.serchBarText=e},expression:"serchBarText"}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",[this._v("高雄景點查詢")])])}]};var m=a("VU/8")({name:"headBox",data:function(){return{serchBarText:""}},methods:{inputChange:function(){this.$emit("change",this.serchBarText)}}},g,!1,function(t){a("8Cm6")},null,null).exports,_=a("d7EF"),x=a.n(_),k={props:["openData"],data:function(){return{arr:this.openData,google:{map:null,marker:null,infowindow:null}}},watch:{openData:function(t){this.arr=t}},methods:{genMap:function(t,e){var a=x()(t,4),n=a[0];a[1],a[2],a[3];this.google.map=new google.maps.Map(document.getElementById(n+"map"),{center:e,zoom:18}),this.google.marker=new google.maps.Marker({position:e,map:this.google.map,animation:google.maps.Animation.DROP}),this.google.marker.setMap(this.google.map)}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.arr,function(e){return a("el-card",{key:e.Id,attrs:{shadow:"hover"}},[a("div",{staticClass:"card_content"},[a("div",{staticClass:"pic"},[a("img",{attrs:{src:e.Picture1}})]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"top_box"},[a("div",{staticClass:"title"},[t._v(t._s(e.Name))]),t._v(" "),e.Ticketinfo?a("el-tag",{staticClass:"options_tag"},[t._v("\n            "+t._s(e.Ticketinfo)+"\n          ")]):t._e()],1),t._v(" "),a("div",{staticClass:"desc"},[t._v(t._s(e.Toldescribe))]),t._v(" "),a("div",{staticClass:"bottom_box"},[a("el-popover",{attrs:{placement:"top",width:"350",trigger:"click"}},[a("div",{staticClass:"mapbox"},[a("div",{staticStyle:{clear:"both","min-height":"400px","max-height":"800px"},attrs:{id:e._id+"map"}})]),t._v(" "),a("div",{staticClass:"address el-icon-news",attrs:{slot:"reference"},on:{click:function(a){t.genMap([e._id,e.Name,e.Picture1,e.Add],{lat:+e.Py,lng:+e.Px})}},slot:"reference"},[t._v("\n               "+t._s(e.Add)+"\n               "),a("el-tooltip",{attrs:{effect:"dark",content:"點擊顯示地圖位置",placement:"right-start"}},[a("img",{staticStyle:{width:"20px"},attrs:{src:"https://goo.gl/w8NN6B"}})])],1)]),t._v(" "),a("div",{staticClass:"openTime el-icon-time"},[t._v(" "+t._s(e.Opentime))]),t._v(" "),a("div",{staticClass:"tel el-icon-phone-outline"},[t._v(" "+t._s(e.Tel))])],1)])])])}))},staticRenderFns:[]};var C=a("VU/8")(k,b,!1,function(t){a("99Ei")},null,null).exports,D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:this.length,"prev-text":"<","next-text":">"},on:{"size-change":this.filterData,"current-change":this.filterData,"prev-click":this.filterData,"next-click":this.filterData}})],1)},staticRenderFns:[]};var w=a("VU/8")({props:{length:{default:0}},methods:{filterData:function(t){this.$emit("paginationClick",t)}}},D,!1,function(t){a("DL8/")},"data-v-8b114bba",null).exports,T={methods:{scrollToTop:function(t){var e=window.scrollY/2,a=0,n=performance.now();window.requestAnimationFrame(function i(o){(a+=Math.PI/(t/(o-n)))>=Math.PI&&window.scrollTo(0,0),0!==window.scrollY&&(window.scrollTo(0,Math.round(e+e*Math.cos(a))),n=o,window.requestAnimationFrame(i))})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"toTop",on:{click:function(e){t.scrollToTop(1e3)}}},[t._v("top")])])},staticRenderFns:[]};var B=a("VU/8")(T,y,!1,function(t){a("p186")},null,null).exports,O=a("mtWM"),A=a.n(O),P="https://data.kcg.gov.tw/api/action/datastore_search?resource_id=92290ee5-6e61-456f-80c0-249eae2fcc97&limit=150";var E=function(t){return A.a.post(P,{data:t}).then(function(t){return t.data}).catch(function(t){console.log(t)})},M={name:"App",components:{HeadBox:m,Pagination:w,Card:C,ScrollTopButton:B},data:function(){return{loading:!1,initData:[],copyData:[],filterData:[],serchBar:{inputText:""},location:{selectValue:"",options:[]},checkbox:{checkAll:!1,options:[],checkedOptions:[],isIndeterminate:!0}}},watch:{location:{handler:function(){this.matchData()},deep:!0},checkbox:{handler:function(){this.matchData()},deep:!0},serchBar:{handler:function(){this.matchData()},deep:!0}},methods:{getOpenData:function(){var t=this;return v()(r.a.mark(function e(){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:a=e.sent,n=a.result.records,t.checkbox.options=[].concat(p()(new u.a(n.map(function(t){return t.Ticketinfo})))).filter(function(t){return!!t}),t.location.options=[].concat(p()(new u.a(n.map(function(t){return t.Zone})))).map(function(t,e){return{id:e,value:t}}),t.initData=[].concat(p()(n)),t.initCopyData(),t.resetTableDataWithPageNo(1);case 9:case"end":return e.stop()}},e,t)}))()},initCopyData:function(){this.loading=!0,this.copyData=[].concat(p()(this.initData)),this.filterData=[].concat(p()(this.copyData)),this.resetTableDataWithPageNo(1)},resetTableDataWithPageNo:function(t){var e=this;this.filterData=this.copyData.filter(function(e,a){return a>=10*(t-1)&&a<10*t}),setTimeout(function(){e.loading=!1},600)},filterDataByOptions:function(t,e){this.copyData=this.copyData.filter(function(a){return a[t].match(e)})},matchData:function(){var t=this;if(this.initCopyData(),this.location.selectValue&&this.filterDataByOptions("Zone",this.location.selectValue),this.serchBar.inputText&&this.filterDataByOptions("Name",this.serchBar.inputText),this.checkbox.checkedOptions.length){var e=[];this.checkbox.checkedOptions.forEach(function(a){t.copyData.forEach(function(t){t.Ticketinfo.match(a)&&e.push(t)})}),this.copyData=[].concat(e)}this.resetTableDataWithPageNo(1)},handleCheckAllChange:function(t){this.checkbox.checkedOptions=t?this.checkbox.options:[],this.checkbox.isIndeterminate=!1},handleCheckedOptionsChange:function(t){var e=t.length;this.checkbox.checkAll=e===this.checkbox.options.length,this.isIndeterminate=e>0&&e<this.checkbox.options.length}},created:function(){this.getOpenData()}},N={render:function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"main_content"},[n("HeadBox",{on:{change:function(e){return t.serchBar.inputText=e}}}),e._v(" "),n("div",{staticClass:"bg"},[n("div",{staticClass:"aside"},[n("div",{staticClass:"aside_box"},[n("div",{staticClass:"box_content"},[n("div",{staticClass:"text"},[e._v("地區")]),e._v(" "),n("el-select",{attrs:{clearable:"",placeholder:"請選擇地區","no-data-text":"無資訊",size:"medium"},model:{value:e.location.selectValue,callback:function(t){e.$set(e.location,"selectValue",t)},expression:"location.selectValue"}},e._l(e.location.options,function(t){return n("el-option",{key:t.id,attrs:{label:t.value,value:t.value}})}))],1)]),e._v(" "),n("div",{staticClass:"aside_box tags"},[n("div",{staticClass:"box_content"},[n("div",{staticClass:"text"},[e._v("標籤")]),e._v(" "),n("el-checkbox",{attrs:{indeterminate:e.checkbox.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkbox.checkAll,callback:function(t){e.$set(e.checkbox,"checkAll",t)},expression:"checkbox.checkAll"}},[e._v("全選")]),e._v(" "),n("el-checkbox-group",{on:{change:e.handleCheckedOptionsChange},model:{value:e.checkbox.checkedOptions,callback:function(t){e.$set(e.checkbox,"checkedOptions",t)},expression:"checkbox.checkedOptions"}},e._l(e.checkbox.options,function(t){return n("div",{key:t},[n("el-checkbox",{attrs:{label:t}},[e._v(e._s(t))])],1)}))],1)])]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main"},[n("ScrollTopButton"),e._v(" "),n("div",{staticClass:"dataLength"},[e._v("\n          共有 "+e._s(e.copyData.length)+" 筆資料\n        ")]),e._v(" "),n("div",{staticClass:"tags_box"},e._l(e.checkbox.checkedOptions,function(t,a){return n("el-tag",{key:t,staticClass:"options_tag",attrs:{closable:""},on:{close:function(t){e.checkbox.checkedOptions.splice(a,1)}}},[e._v("\n            "+e._s(t)+"\n          ")])})),e._v(" "),n("div",{staticClass:"cards"},[n("Card",{attrs:{openData:e.filterData},on:{"update:openData":function(t){e.filterData=t}}})],1),e._v(" "),n("Pagination",{staticClass:"pagination",attrs:{length:e.copyData.length},on:{paginationClick:e.resetTableDataWithPageNo}})],1)])],1)])},staticRenderFns:[]};var V=a("VU/8")(M,N,!1,function(t){a("l0EM")},null,null).exports;n.default.use(o.a,{locale:s.a}),n.default.config.productionTip=!1,new n.default({el:"#app",components:{App:V},template:"<App/>"})},l0EM:function(t,e){},p186:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d1aaf901f8e1abf47e04.js.map