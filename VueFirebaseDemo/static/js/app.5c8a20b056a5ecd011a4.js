webpackJsonp([4],{"9aAe":function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main_contain",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=r("VU/8")({},a,!1,function(e){r("9aAe")},null,null).exports,u=r("/ocq"),c=r("NYxO"),o=(r("mtWM"),{signout:function(e){e.userInfo={}},rememberAccount:function(e,t){var r=window.localStorage.getItem("rememberAccount");t.remember&&!r&&window.localStorage.setItem("rememberAccount",t.account),!t.remember&&r&&window.localStorage.removeItem("rememberAccount")},loading:function(e){e.isLoading=!e.isLoading},setUserInfo:function(e,t){e.userInfo=t}}),i=r("Xxa5"),p=r.n(i),f=r("exGp"),m=r.n(f),d=r("Sazm"),h=r.n(d),l={apiKey:"AIzaSyDcLFUgG69v9MMBCa9H8HeLWPAyijgGftU",authDomain:"loginwithvue.firebaseapp.com",databaseURL:"https://loginwithvue.firebaseio.com",projectId:"loginwithvue",storageBucket:"loginwithvue.appspot.com",messagingSenderId:"622688795465"},g=this;h.a.initializeApp(l);var v,b,w,x,k,A=h.a.auth(),I=(v=m()(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,h.a.auth().createUserWithEmailAndPassword(t.account,t.password);case 4:return e.sent,r.message="success",h.a.auth().languageCode="zh-tw",e.next=9,h.a.auth().currentUser.sendEmailVerification();case 9:e.next=23;break;case 11:e.prev=11,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/email-already-in-use"===e.t1?16:"auth/invalid-email"===e.t1?18:"auth/weak-password"===e.t1?20:22;break;case 16:return r.message="此帳號已被註冊！",e.abrupt("break",23);case 18:return r.message="帳號格式有誤！",e.abrupt("break",23);case 20:return r.message="密碼強度不足！",e.abrupt("break",23);case 22:r.message=e.t0.message;case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,g,[[1,11]])})),function(e){return v.apply(this,arguments)}),U=(b=m()(p.a.mark(function e(t){var r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,h.a.auth().signInWithEmailAndPassword(t.account,t.password);case 4:if((n=e.sent).emailVerified){e.next=8;break}return r.message="請先到信箱驗證您的帳號！",e.abrupt("return",r);case 8:h.a.auth().setPersistence(t.rememberLogin?h.a.auth.Auth.Persistence.LOCAL:h.a.auth.Auth.Persistence.SESSION),r={message:"success",uid:n.uid,account:t.account},e.next=27;break;case 12:e.prev=12,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?17:"auth/user-disabled"===e.t1?19:"auth/user-not-found"===e.t1?21:"auth/wrong-password"===e.t1?23:25;break;case 17:return r.message="無效的帳號格式！",e.abrupt("break",26);case 19:return r.message="此帳號已被禁用！",e.abrupt("break",26);case 21:return r.message="查無此帳號！",e.abrupt("break",26);case 23:return r.message="帳號或密碼錯誤！",e.abrupt("break",26);case 25:r.message=e.t0.message;case 26:case 27:return e.abrupt("return",r);case 28:case"end":return e.stop()}},e,g,[[1,12]])})),function(e){return b.apply(this,arguments)}),y=(w=m()(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,h.a.auth().sendPasswordResetEmail(t||h.a.auth().currentUser.email);case 4:e.sent,r.message="請到您的信箱驗證您的帳號！",e.next=17;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/user-not-found"===e.t1?13:15;break;case 13:return r.message="查無此帳號！",e.abrupt("break",16);case 15:r.message=e.t0.message;case 16:case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,g,[[1,8]])})),function(e){return w.apply(this,arguments)}),L=(x=m()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.auth().signOut();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,g,[[0,6]])})),function(){return x.apply(this,arguments)}),S=function(){return h.a.auth().currentUser},P=(k=m()(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={displayName:t.displayName,photoURL:t.photoURL},e.prev=1,console.log(r),e.next=5,h.a.auth().currentUser.updateProfile(r);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,g,[[1,8]])})),function(e){return k.apply(this,arguments)}),E={loginCheck:function(e,t){var r=this,n=e.commit;e.state;return m()(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("loading"),e.next=3,U(t);case 3:return a=e.sent,n("loading"),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,r)}))()},registerNewAccount:function(e,t){var r=this,n=e.commit;return m()(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("loading"),e.next=3,I(t);case 3:return a=e.sent,n("loading"),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,r)}))()},userLogout:function(e){var t=this,r=e.commit;return m()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("loading"),e.next=3,L();case 3:e.sent,r("signout"),r("loading");case 6:case"end":return e.stop()}},e,t)}))()},resetPassword:function(e,t){var r=this;e.commit;return m()(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("asddsd====="+t),e.next=3,y(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,r)}))()},getUserInfo:function(e){var t=this,r=e.commit;return m()(p.a.mark(function e(){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:return n=e.sent,r("setUserInfo",n),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,t)}))()},updateUserInfo:function(e,t){var r=this,n=e.commit;return m()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("loading"),e.next=3,P(t);case 3:return e.t0=n,e.next=6,S();case 6:return e.t1=e.sent,(0,e.t0)("setUserInfo",e.t1),n("loading"),e.abrupt("return","success");case 10:case"end":return e.stop()}},e,r)}))()},rememberAccount:function(e,t){(0,e.commit)("rememberAccount",t)}};n.default.use(c.a);var H={captchaKey:"6LfjZkAUAAAAAOeAKU23YEQxHndx6-s4iqgGksyT",isLoading:!1,userInfo:{}},N=new c.a.Store({state:H,getters:{captchaKey:function(e){return e.captchaKey},isLoading:function(e){return e.isLoading},userInfo:function(e){return e.userInfo}},mutations:o,actions:E}),R={};R.login=function(e){return r.e(0).then(function(){return e(r("VYHB"))}.bind(null,r)).catch(r.oe)},R.home=function(e){return r.e(1).then(function(){return e(r("ZHiF"))}.bind(null,r)).catch(r.oe)},R.user=function(e){return r.e(2).then(function(){return e(r("heID"))}.bind(null,r)).catch(r.oe)};var C=R;n.default.use(u.a);var O=[{path:"/",component:C.login,meta:[]},{path:"*",redirect:"/runkids.io"},{path:"/runkids.io/",component:C.home,children:[{path:"/user",component:C.user,meta:["設定","個人資訊"]}]}],z=new u.a({routes:O});z.beforeEach(function(e,t,r){e.matched.some(function(e){return e.meta.requiresAuth});"/"===e.path||S()?"/"===e.path&&S()?r("/runkids.io"):r():r("/")});var K=z,W=r("zL8q"),_=r.n(W);r("tvR6");n.default.config.productionTip=!1,n.default.use(_.a);var j=void 0;A.onAuthStateChanged(function(e){j||(j=new n.default({el:"#app",router:K,store:N,render:function(e){return e(s)}}))})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5c8a20b056a5ecd011a4.js.map