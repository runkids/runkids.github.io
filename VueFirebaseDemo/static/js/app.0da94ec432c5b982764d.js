webpackJsonp([4],{6377:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"main_contain",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")({},a,!1,function(e){n("6377")},null,null).exports,s=n("/ocq"),c=n("NYxO"),o=(n("mtWM"),{signout:function(e){e.userInfo={}},rememberAccount:function(e,t){var n=window.localStorage.getItem("rememberAccount");t.remember&&!n&&window.localStorage.setItem("rememberAccount",t.account),!t.remember&&n&&window.localStorage.removeItem("rememberAccount")},loading:function(e){e.isLoading=!e.isLoading},setUserInfo:function(e,t){e.userInfo=t},setOnlineCount:function(e,t){e.onlineCount=t}}),i=n("Xxa5"),f=n.n(i),p=n("exGp"),d=n.n(p),m=n("SSY3"),h={loginCheck:function(e,t){var n=this,r=e.commit;e.state;return d()(f.a.mark(function e(){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("loading"),e.next=3,Object(m.f)(t);case 3:if("success"!==(a=e.sent).message){e.next=7;break}return e.next=7,Object(m.h)("login");case 7:return r("loading"),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,n)}))()},registerNewAccount:function(e,t){var n=this,r=e.commit;return d()(f.a.mark(function e(){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("loading"),e.next=3,Object(m.g)(t);case 3:return a=e.sent,r("loading"),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,n)}))()},userLogout:function(e){var t=this,n=e.commit;e.state;return d()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n("loading"),e.next=3,Object(m.h)("logout");case 3:return e.next=5,Object(m.e)();case 5:n("signout"),n("loading");case 7:case"end":return e.stop()}},e,t)}))()},resetPassword:function(e,t){var n=this;e.commit;return d()(f.a.mark(function e(){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e,n)}))()},getUserInfo:function(e){var t=this,n=e.commit;return d()(f.a.mark(function e(){var r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)();case 2:return r=e.sent,n("setUserInfo",r),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,t)}))()},updateUserInfo:function(e,t){var n=this,r=e.commit;return d()(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r("loading"),e.next=3,Object(m.i)(t);case 3:return e.t0=r,e.next=6,Object(m.b)();case 6:return e.t1=e.sent,(0,e.t0)("setUserInfo",e.t1),r("loading"),e.abrupt("return","success");case 10:case"end":return e.stop()}},e,n)}))()},rememberAccount:function(e,t){(0,e.commit)("rememberAccount",t)}};r.default.use(c.a);var l={captchaKey:"6LfjZkAUAAAAAOeAKU23YEQxHndx6-s4iqgGksyT",isLoading:!1,onlineCount:0,userInfo:{}},b=new c.a.Store({state:l,getters:{captchaKey:function(e){return e.captchaKey},isLoading:function(e){return e.isLoading},userInfo:function(e){return e.userInfo},onlineCount:function(e){return e.onlineCount}},mutations:o,actions:h}),g={};g.login=function(e){return n.e(0).then(function(){return e(n("VYHB"))}.bind(null,n)).catch(n.oe)},g.home=function(e){return n.e(1).then(function(){return e(n("ZHiF"))}.bind(null,n)).catch(n.oe)},g.user=function(e){return n.e(2).then(function(){return e(n("heID"))}.bind(null,n)).catch(n.oe)};var v=g;r.default.use(s.a);var w=[{path:"/",component:v.login,meta:[]},{path:"*",redirect:"/runkids.io"},{path:"/runkids.io/",component:v.home,children:[{path:"/user",component:v.user,meta:["設定","個人資訊"]}]}],x=new s.a({routes:w});x.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.requiresAuth});"/"===e.path||Object(m.b)()?"/"===e.path&&Object(m.b)()?n("/runkids.io"):n():n("/")});var k=x,A=n("zL8q"),O=n.n(A);n("tvR6");r.default.config.productionTip=!1,r.default.use(O.a);var I=void 0;m.a.onAuthStateChanged(function(e){I||(I=new r.default({el:"#app",router:k,store:b,render:function(e){return e(u)}}))})},SSY3:function(e,t,n){"use strict";var r=n("//Fk"),a=n.n(r),u=n("Xxa5"),s=n.n(u),c=n("exGp"),o=n.n(c),i=n("Sazm"),f=n.n(i),p={apiKey:"AIzaSyDcLFUgG69v9MMBCa9H8HeLWPAyijgGftU",authDomain:"loginwithvue.firebaseapp.com",databaseURL:"https://loginwithvue.firebaseio.com",projectId:"loginwithvue",storageBucket:"loginwithvue.appspot.com",messagingSenderId:"622688795465"};n.d(t,"a",function(){return x}),n.d(t,"g",function(){return k}),n.d(t,"f",function(){return A}),n.d(t,"d",function(){return O}),n.d(t,"e",function(){return I}),n.d(t,"b",function(){return U}),n.d(t,"i",function(){return y}),n.d(t,"c",function(){return L}),n.d(t,"h",function(){return j});var d=this;f.a.initializeApp(p);var m,h,l,b,g,v,w=f.a.database(),x=f.a.auth(),k=(m=o()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,f.a.auth().createUserWithEmailAndPassword(t.account,t.password);case 4:return e.sent,n.message="success",f.a.auth().languageCode="zh-tw",e.next=9,f.a.auth().currentUser.sendEmailVerification();case 9:e.next=23;break;case 11:e.prev=11,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/email-already-in-use"===e.t1?16:"auth/invalid-email"===e.t1?18:"auth/weak-password"===e.t1?20:22;break;case 16:return n.message="此帳號已被註冊！",e.abrupt("break",23);case 18:return n.message="帳號格式有誤！",e.abrupt("break",23);case 20:return n.message="密碼強度不足！",e.abrupt("break",23);case 22:n.message=e.t0.message;case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}},e,d,[[1,11]])})),function(e){return m.apply(this,arguments)}),A=(h=o()(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,f.a.auth().signInWithEmailAndPassword(t.account,t.password);case 4:if((r=e.sent).emailVerified){e.next=8;break}return n.message="請先到信箱驗證您的帳號！",e.abrupt("return",n);case 8:f.a.auth().setPersistence(t.rememberLogin?f.a.auth.Auth.Persistence.LOCAL:f.a.auth.Auth.Persistence.SESSION),n={message:"success",uid:r.uid,account:t.account},e.next=27;break;case 12:e.prev=12,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/invalid-email"===e.t1?17:"auth/user-disabled"===e.t1?19:"auth/user-not-found"===e.t1?21:"auth/wrong-password"===e.t1?23:25;break;case 17:return n.message="無效的帳號格式！",e.abrupt("break",26);case 19:return n.message="此帳號已被禁用！",e.abrupt("break",26);case 21:return n.message="查無此帳號！",e.abrupt("break",26);case 23:return n.message="帳號或密碼錯誤！",e.abrupt("break",26);case 25:n.message=e.t0.message;case 26:case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}},e,d,[[1,12]])})),function(e){return h.apply(this,arguments)}),O=(l=o()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,f.a.auth().sendPasswordResetEmail(t||f.a.auth().currentUser.email);case 4:e.sent,n.message="請到您的信箱驗證您的帳號！",e.next=17;break;case 8:e.prev=8,e.t0=e.catch(1),e.t1=e.t0.code,e.next="auth/user-not-found"===e.t1?13:15;break;case 13:return n.message="查無此帳號！",e.abrupt("break",16);case 15:n.message=e.t0.message;case 16:case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,d,[[1,8]])})),function(e){return l.apply(this,arguments)}),I=(b=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.auth().signOut();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}},e,d,[[0,6]])})),function(){return b.apply(this,arguments)}),U=function(){return f.a.auth().currentUser},y=(g=o()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={displayName:t.displayName,photoURL:t.photoURL},e.prev=1,console.log(n),e.next=5,f.a.auth().currentUser.updateProfile(n);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,d,[[1,8]])})),function(e){return g.apply(this,arguments)}),L=function(){return w.ref("/OnlineMember/")},j=(v=o()(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.ref("/OnlineMember/"),e.next=3,new a.a(function(e){n.once("value",function(t){e(t.val().count)})}).then(function(e){n.set({count:"login"===t?e+1:e-1})});case 3:case"end":return e.stop()}},e,d)})),function(e){return v.apply(this,arguments)})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0da94ec432c5b982764d.js.map