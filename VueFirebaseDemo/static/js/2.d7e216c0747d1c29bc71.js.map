{"version":3,"sources":["webpack:///src/page/User.vue","webpack:///./src/page/User.vue?e0ef","webpack:///./src/page/User.vue"],"names":["User","callback","methods","extends_default","Object","vuex_esm","imageLoader","file","result","_this","this","then","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","mail","message","userLogout","_this2","valid","time","getMinutes","computed","_this3","getUserInfo","lastSignInTime","creationTime","page_User","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","ref","attrs","model","userInfoForm","rules","userInfoRules","status-icon","label-width","_v","staticStyle","color","_s","userInfo","emailVerified","for","src","photoURL","id","type","on","change","fileSelected","label","prop","auto-complete","disabled","$$v","$set","placeholder","click","$event","submitForm","resetPass","email","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"VueFirebaseDemo/static/js/2.d7e216c0747d1c29bc71.js","sourcesContent":["<template>\n  <div class=\"userInfo_contain\">\n    <el-form :model=\"userInfoForm\" v-loading=\"isLoading\"  :rules=\"userInfoRules\" status-icon ref=\"userInfoForm\" label-width=\"100px\" class=\"userInfoForm\">\n\t\t<el-form-item>\n\t\t\t<div class=\"paddingR\">\n\t\t\t\t<div>帳號驗證狀態：<span style=\"color:red;\">{{userInfo.emailVerified?\"已驗證\":\"未驗證\"}}</span></div>\n\t\t\t\t<div>\n\t\t\t\t\t帳號建立時間：{{creationTime}}\n\t\t\t\t</div>\n\t\t\t\t<div class='innerDiv'>\n\t\t\t\t\t帳號最後登入時間：{{lastSignInTime}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"\">\n\t\t\t<label for=\"file-upload\" class=\"custom-file-upload\">\n\t\t\t\t<img class=\"showUserImg\" :src=\"userInfoForm.photoURL\"/>\n\t\t\t</label>\n\t\t\t</div>\n\t\t\t<input id=\"file-upload\" @change=\"fileSelected\" type=\"file\"/>\n\t\t</el-form-item>\n\t\t<el-form-item label=\"帳號\" prop=\"email\">\n\t\t\t<el-input type=\"email\" v-model=\"userInfo.email\" auto-complete=\"off\" disabled></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item label=\"暱稱\" prop=\"displayName\">\n\t\t\t<el-input type=\"text\" placeholder=\"如果沒輸入也會更新暱稱喔！\" v-model=\"userInfoForm.displayName\" auto-complete=\"off\"></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item>\n\t\t\t<el-button type=\"primary\" @click=\"submitForm('userInfoForm')\">更新資料</el-button>\n\t\t\t<el-button type=\"info\" @click=\"resetPass(userInfo.email)\">重設密碼</el-button>\n\t\t</el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport {mapActions,mapGetters} from 'vuex'\nexport default {\n    data(){\n\t\tvar validateDisplayName = (rule, value, callback) => {\n            if (value.length>20) {\n                callback(new Error('名稱過長！'));\n\t\t\t} else {\n                callback();\n            }\n        };\n\t\treturn{\n\t\t\tlastSignInTime:'',\n\t\t\tcreationTime:'',\n\t\t\tuserInfoForm:{},\n\t\t\tuserInfoRules: {\n                displayName: [{ validator: validateDisplayName, trigger: \"blur\" }],\n            },\n\t\t}\n    },\n    methods:{\n        ...mapActions(['resetPassword','getUserInfo','updateUserInfo','resetPassword','userLogout']),\n        fileSelected(event){\n\t\t\tconst file = event.target.files.item(0); //取得File物件\n\t\t\tconst reader = new FileReader(); //建立FileReader 監聽 Load 事件\n\t\t\treader.addEventListener('load',this.imageLoader);\n\t\t\treader.readAsDataURL(file);\n        },\n        imageLoader(event){\n          \tthis.userInfoForm.photoURL=event.target.result;\n\t\t},\n\t\tresetPass(mail){\n\t\t\tthis.$confirm('即將發送重置密碼信件，且將返回登入畫面，是否繼續?', '提示', {\n\t\t\t\tconfirmButtonText: '確認重置密碼',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then( async () => {\n\t\t\t\tconst res = await this.resetPassword(mail);\n\t\t\t\tthis.$message({\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tmessage: res.message\n\t\t\t\t});\n\t\t\t\tawait this.userLogout();\n\t\t\t\tthis.$router.push('/');\n\t\t\t}).catch(() => {\n\t\t\t});\n\t\t},\n        submitForm(form){\n            this.$refs[form].validate( async (valid) => {\n                if (valid) {\n                    const res = await this.updateUserInfo(this.userInfoForm); //更新個人資訊\n                    if(res==='success'){\n\t\t\t\t\t\tthis.$notify.success({\n                            title: '通知！',\n                            message: '個人資訊修改成功！'\n                        });\n                    }else{\n                        this.$notify.error({\n                            title: '通知！',\n                            message: '個人資訊修改失敗！'\n                        });\n                    }\n                } else {\n                    return false;\n                }\n            });\n\t\t},\n\t\tformateDate(time){\n\t\t\tconst date = new Date(time);\n\t\t\treturn `${date.getFullYear()}/${date.getMonth()+1}/${date.getDate()} ${date.getHours()}:${date.getMinutes()}`;\n\t\t}\n    },\n    computed:{\n      \t...mapGetters(['userInfo','isLoading'])\n    },\n    async created(){\n\t  await this.getUserInfo();\n\t  this.lastSignInTime = this.formateDate(this.userInfo.metadata.lastSignInTime);\n\t  this.creationTime = this.formateDate(this.userInfo.metadata.creationTime);\n      this.userInfoForm = {\n          displayName: this.userInfo.displayName?this.userInfo.displayName:'匿名',\n          photoURL: this.userInfo.photoURL?this.userInfo.photoURL:'https://goo.gl/bydiLS'\n      }\n    }\n}\n</script>\n<style>\ninput[type=\"file\"] {\n  border:1px solid;\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0,0,0,0);\n    border: 0;\n}\n.custom-file-upload {\n    border: 1px dashed rgba(204, 204, 204, 0.925);\n    display: inline-block;\n    padding: 6px 12px;\n    cursor: pointer;\n    height: 100px;\n}\n.showUserImg{\n  \tborder:1px solid;\n    overflow: hidden;\n    line-height: 1;\n    vertical-align: middle;\n    width: 100px;\n}\n.showUserImg:hover{\n  \topacity: 0;\n  \ttransition-duration: 1.5s;\n}\n.userInfoForm{\n\twidth: 50%;\n\tpadding-left: 20%;\n\tpadding-top: 20px;\n}\n.paddingR{\n\tposition: absolute;\n\tright: 60px;\n\tdisplay: inline-block;\n}\n.innerDiv{\n\tmargin-right: 0%;\n\ttext-align: right;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/User.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userInfo_contain\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],ref:\"userInfoForm\",staticClass:\"userInfoForm\",attrs:{\"model\":_vm.userInfoForm,\"rules\":_vm.userInfoRules,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',[_c('div',{staticClass:\"paddingR\"},[_c('div',[_vm._v(\"帳號驗證狀態：\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.userInfo.emailVerified?\"已驗證\":\"未驗證\"))])]),_vm._v(\" \"),_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t帳號建立時間：\"+_vm._s(_vm.creationTime)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"innerDiv\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t帳號最後登入時間：\"+_vm._s(_vm.lastSignInTime)+\"\\n\\t\\t\\t\\t\")])]),_vm._v(\" \"),_c('div',{},[_c('label',{staticClass:\"custom-file-upload\",attrs:{\"for\":\"file-upload\"}},[_c('img',{staticClass:\"showUserImg\",attrs:{\"src\":_vm.userInfoForm.photoURL}})])]),_vm._v(\" \"),_c('input',{attrs:{\"id\":\"file-upload\",\"type\":\"file\"},on:{\"change\":_vm.fileSelected}})]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"帳號\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"email\",\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"暱稱\",\"prop\":\"displayName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"如果沒輸入也會更新暱稱喔！\",\"auto-complete\":\"off\"},model:{value:(_vm.userInfoForm.displayName),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"displayName\", $$v)},expression:\"userInfoForm.displayName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('userInfoForm')}}},[_vm._v(\"更新資料\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){_vm.resetPass(_vm.userInfo.email)}}},[_vm._v(\"重設密碼\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4254dc8d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/User.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4254dc8d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4254dc8d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/User.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}