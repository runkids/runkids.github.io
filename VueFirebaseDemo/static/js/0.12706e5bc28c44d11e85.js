webpackJsonp([0],{"51Fp":function(e,t){},"F7+6":function(e,t){},VYHB:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("Xxa5"),n=r.n(s),a=r("exGp"),o=r.n(a),c=r("Dd8w"),i=r.n(c),l=r("NYxO"),u={data:function(){return{widgetId:0}},methods:{reset:function(){window.grecaptcha.reset(this.widgetId)},render:function(){var e=this;window.grecaptcha&&(this.widgetId=window.grecaptcha.render("g-recaptcha",{sitekey:this.captchaKey,callback:function(t){e.$emit("verify",e.widgetId)}}))}},computed:i()({},Object(l.c)(["captchaKey"])),mounted:function(){this.render()}},m={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"g-recaptcha",attrs:{id:"g-recaptcha","data-sitekey":this.captchaKey}})},staticRenderFns:[]};var p=r("VU/8")(u,m,!1,function(e){r("F7+6")},null,null).exports,g={model:{prop:"isRegister"},props:{isRegister:Boolean},components:{Recaptcha:p},data:function(){var e=this;return{registerForm:{account:"",password:"",checkpass:""},registerRules:{account:[{validator:function(e,t,r){""===t?r(new Error("請輸入帳號")):r()},trigger:"blur"}],password:[{validator:function(e,t,r){""===t?r(new Error("請輸入密碼")):r()},trigger:"blur"}],checkpass:[{validator:function(t,r,s){""===r?s(new Error("請再輸入一次密碼")):r!==e.registerForm.password?s(new Error("密碼不一致!")):s()},trigger:"blur"}]},recaptchaCheck:null}},methods:i()({},Object(l.b)(["registerNewAccount"]),{submitForm:function(e){var t,r=this;this.$refs[e].validate((t=o()(n.a.mark(function e(t){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(null!==r.recaptchaCheck){e.next=4;break}return r.$message({showClose:!0,message:"請勾選我不是機器人！",type:"error"}),e.abrupt("return",!1);case 4:return e.next=6,r.registerNewAccount(r.registerForm);case 6:"success"===(s=e.sent).message?(r.$message({showClose:!0,message:"註冊成功！請到您的信箱進行驗證再登入！",type:"success"}),r.changeToLogin()):(r.$notify.error({title:"註冊失敗",message:s,duration:8e3}),r.initForm(),r.reSetRecaptcha()),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)}))},initForm:function(){this.registerForm={account:"",password:"",checkpass:""}},changeToLogin:function(){this.$emit("changeToLogin")},doRecaptcha:function(e){this.recaptchaCheck=e},reSetRecaptcha:function(){this.recaptchaCheck=null,this.$refs.recaptcha.reset()}}),computed:i()({},Object(l.c)(["isLoading"]))},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"registerForm",staticClass:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules}},[r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text",placeholder:"E-MAIL","auto-complete":"off"},model:{value:e.registerForm.account,callback:function(t){e.$set(e.registerForm,"account",t)},expression:"registerForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密碼","auto-complete":"off"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"checkpass"}},[r("el-input",{attrs:{type:"password",placeholder:"確認密碼","auto-complete":"off"},model:{value:e.registerForm.checkpass,callback:function(t){e.$set(e.registerForm,"checkpass",t)},expression:"registerForm.checkpass"}})],1),e._v(" "),r("Recaptcha",{ref:"recaptcha",on:{verify:e.doRecaptcha}}),e._v(" "),r("el-form-item",[r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"btnGroup",attrs:{type:"primary","element-loading-text":"註冊中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{click:function(t){e.submitForm("registerForm")}}},[e._v("註冊")]),e._v(" "),r("el-button",{staticClass:"btnGroup",on:{click:e.changeToLogin}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var h={data:function(){return{loginForm:{account:"",password:"",rememberLogin:!1},loginRules:{account:[{validator:function(e,t,r){""===t?r(new Error("請輸入帳號")):r()},trigger:"blur"}],password:[{validator:function(e,t,r){""===t?r(new Error("請輸入密碼")):r()},trigger:"blur"}]},isRegister:!1,resetPassAcc:"",recaptchaCheck:null,rememberAcc:!1,cssChange:!1}},components:{Recaptcha:p,Register:r("VU/8")(g,d,!1,function(e){r("51Fp")},null,null).exports},methods:i()({},Object(l.b)(["loginCheck","rememberAccount","resetPassword"]),{submitForm:function(e){var t,r=this;this.$refs[e].validate((t=o()(n.a.mark(function e(t){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}if(null!==r.recaptchaCheck){e.next=4;break}return r.$message({showClose:!0,message:"請勾選我不是機器人！",type:"error"}),e.abrupt("return",!1);case 4:return e.next=6,r.loginCheck(r.loginForm);case 6:"success"===(s=e.sent).message?(r.$message({showClose:!0,message:"登入成功！",type:"success"}),r.rememberAccount({account:r.loginForm.account,remember:r.rememberAcc}),r.$router.replace("runkids.io")):(r.$notify.error({title:"登入失敗",message:s.message}),r.loginForm.password="",r.reSetRecaptcha()),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,r)})),function(e){return t.apply(this,arguments)}))},doRecaptcha:function(e){this.recaptchaCheck=e},reSetRecaptcha:function(){this.recaptchaCheck=null,this.$refs.recaptcha.reset()},forgetPass:function(){var e,t=this;this.$createElement;this.$prompt("請輸入您的帳號：","忘記密碼",{confirmButtonText:"發送重置密碼信件",cancelButtonText:"取消",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"信箱格式有誤！"}).then((e=o()(n.a.mark(function e(r){var s,a=r.value;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.resetPassword(a);case 2:s=e.sent,t.$message({type:"warning",message:s.message});case 4:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)})).catch(function(){})}}),computed:i()({},Object(l.c)(["captchaKey","isLoading"])),mounted:function(){var e=this,t=window.localStorage.getItem("rememberAccount");t&&(this.loginForm.account=t,this.rememberAcc=!0),setTimeout(function(){e.cssChange=!e.cssChange},500)},beforeDestroy:function(){this.reSetRecaptcha()}},f={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login_contain main_contain"},[r("div",{class:{afterLoading:e.cssChange,berforLoading:!e.cssChange}},[r("p",{staticClass:"login_title"},[e._v("Vue + Firebase Demo")]),e._v(" "),e.isRegister?r("div",{staticClass:"login_page"},[r("Register",{on:{changeToLogin:function(t){e.isRegister=!e.isRegister}},model:{value:e.isRegister,callback:function(t){e.isRegister=t},expression:"isRegister"}})],1):r("div",{staticClass:"login_page"},[r("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules}},[r("el-form-item",{attrs:{prop:"account"}},[r("el-input",{attrs:{type:"text",placeholder:"E-MAIL","auto-complete":"off"},model:{value:e.loginForm.account,callback:function(t){e.$set(e.loginForm,"account",t)},expression:"loginForm.account"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密碼","auto-complete":"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),r("Recaptcha",{ref:"recaptcha",on:{verify:e.doRecaptcha}}),e._v(" "),r("el-checkbox",{staticClass:"loginCheckbox",attrs:{label:"記住帳號"},model:{value:e.rememberAcc,callback:function(t){e.rememberAcc=t},expression:"rememberAcc"}}),e._v(" "),r("el-checkbox",{staticClass:"loginCheckbox",attrs:{label:"保持登入"},model:{value:e.loginForm.rememberLogin,callback:function(t){e.$set(e.loginForm,"rememberLogin",t)},expression:"loginForm.rememberLogin"}}),e._v(" "),r("el-form-item",[r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isLoading,expression:"isLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"loginBtn",attrs:{type:"success","element-loading-text":"驗證中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{click:function(t){e.submitForm("loginForm")}}},[e._v("登入")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:e.forgetPass}},[e._v("忘記密碼？")])],1),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(t){e.isRegister=!e.isRegister}}},[e._v("沒有帳號嗎？立刻註冊新帳號！")])],1)],1)])])},staticRenderFns:[]};var b=r("VU/8")(h,f,!1,function(e){r("lXuZ")},null,null);t.default=b.exports},lXuZ:function(e,t){}});
//# sourceMappingURL=0.12706e5bc28c44d11e85.js.map