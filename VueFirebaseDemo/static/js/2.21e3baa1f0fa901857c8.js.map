{"version":3,"sources":["webpack:///src/page/User.vue","webpack:///./src/page/User.vue?ba5c","webpack:///./src/page/User.vue"],"names":["User","callback","methods","extends_default","Object","vuex_esm","imageLoader","file","result","_this","this","then","asyncToGenerator_default","regenerator_default","a","mark","_callee","res","mail","message","userLogout","_this2","valid","time","getMinutes","num","computed","_this3","getUserInfo","lastSignInTime","creationTime","page_User","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","display","attrs","span","for","src","userInfoForm","photoURL","_v","id","type","on","change","fileSelected","color","_s","userInfo","emailVerified","directives","name","rawName","value","expression","ref","label-width","model","rules","userInfoRules","status-icon","label","prop","auto-complete","disabled","$$v","$set","placeholder","click","$event","submitForm","resetPass","email","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oLAsCAA,yCAWA,gBACA,kGAPA,UAEAC,aAUA,YAEAC,QAAAC,OAAAC,OAAAC,EAAA,EAAAD,EAAA,+DACA,sHAIAE,6BACAC,gEAGAC,8BAEA,IAAAC,EAAAC,uEAEA,0BACA,UACA,YAHAC,KAAAC,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAIA,IAAAC,kGACAC,2CAEA,oBAEAC,qBACAC,mCACA,6FAIA,MAAAC,EAAAX,uDACAY,uEACAA,EAAA,oHAIA,cAEA,qCAGA,cAEA,8DAKA,oIAGAC,mJACAC,kDAIAC,MAEAA,KAIAC,SAAAvB,OAAAC,OAAAC,EAAA,EAAAD,EAAA,WAEA,kCACA,IAAAuB,EAAAjB,wHACAkB,wEACAC,iEACAC,wFAEA,sDAEA,wEC3HAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAvB,KAAawB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,qBAA+BF,EAAA,UAAeE,YAAA,WAAqBF,EAAA,UAAeG,aAAaC,QAAA,gBAAyBC,OAAQC,KAAA,MAAWN,EAAA,SAAcE,YAAA,qBAAAG,OAAwCE,IAAA,iBAAqBP,EAAA,OAAYE,YAAA,cAAAG,OAAiCG,IAAAX,EAAAY,aAAAC,cAAiCb,EAAAc,GAAA,KAAAX,EAAA,SAA4BK,OAAOO,GAAA,cAAAC,KAAA,QAAiCC,IAAKC,OAAAlB,EAAAmB,gBAA2BnB,EAAAc,GAAA,KAAAX,EAAA,OAAwBE,YAAA,SAAAC,aAAkCC,QAAA,kBAA0BJ,EAAA,OAAAH,EAAAc,GAAA,SAAAX,EAAA,QAAuCG,aAAac,MAAA,SAAepB,EAAAc,GAAAd,EAAAqB,GAAArB,EAAAsB,SAAAC,cAAA,kBAAAvB,EAAAc,GAAA,KAAAX,EAAA,OAAAH,EAAAc,GAAA,sBAAAd,EAAAqB,GAAArB,EAAAH,cAAA,gBAAAG,EAAAc,GAAA,KAAAX,EAAA,UAAgLH,EAAAc,GAAA,sBAAAd,EAAAqB,GAAArB,EAAAJ,gBAAA,wBAAAI,EAAAc,GAAA,KAAAX,EAAA,UAAAA,EAAA,UAAwHK,OAAOC,KAAA,MAAWN,EAAA,WAAgBqB,aAAaC,KAAA,UAAAC,QAAA,YAAAC,MAAA3B,EAAA,UAAA4B,WAAA,cAAgFC,IAAA,eAAAxB,YAAA,eAAAG,OAAuDsB,cAAA,OAAAC,MAAA/B,EAAAY,aAAAoB,MAAAhC,EAAAiC,cAAAC,cAAA,MAA0F/B,EAAA,gBAAqBK,OAAO2B,MAAA,KAAAC,KAAA,WAA6BjC,EAAA,YAAiBK,OAAOQ,KAAA,QAAAqB,gBAAA,MAAAC,SAAA,IAAmDP,OAAQJ,MAAA3B,EAAAsB,SAAA,MAAAtD,SAAA,SAAAuE,GAAoDvC,EAAAwC,KAAAxC,EAAAsB,SAAA,QAAAiB,IAAqCX,WAAA,qBAA8B,GAAA5B,EAAAc,GAAA,KAAAX,EAAA,gBAAqCK,OAAO2B,MAAA,KAAAC,KAAA,iBAAmCjC,EAAA,YAAiBK,OAAOQ,KAAA,OAAAyB,YAAA,gBAAAJ,gBAAA,OAAkEN,OAAQJ,MAAA3B,EAAAY,aAAA,YAAA5C,SAAA,SAAAuE,GAA8DvC,EAAAwC,KAAAxC,EAAAY,aAAA,cAAA2B,IAA+CX,WAAA,+BAAwC,GAAA5B,EAAAc,GAAA,KAAAX,EAAA,gBAAAA,EAAA,aAAqDK,OAAOQ,KAAA,WAAiBC,IAAKyB,MAAA,SAAAC,GAAyB3C,EAAA4C,WAAA,oBAAiC5C,EAAAc,GAAA,UAAAd,EAAAc,GAAA,KAAAX,EAAA,aAA+CK,OAAOQ,KAAA,QAAcC,IAAKyB,MAAA,SAAAC,GAAyB3C,EAAA6C,UAAA7C,EAAAsB,SAAAwB,WAAoC9C,EAAAc,GAAA,+BAE3gEiC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAnF,EACA+B,GATA,EAVA,SAAAqD,GACAF,EAAA,SAaA,KAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"VueFirebaseDemo/static/js/2.21e3baa1f0fa901857c8.js","sourcesContent":["<template>\n  <div class=\"userInfo_contain\">\n\t  <el-row class=\"elrow1\" style=\"\">\n\t\t<el-col :span=\"24\" style=\"display: inline-block;\">\n\t\t\t<label for=\"file-upload\" class=\"custom-file-upload\">\n\t\t\t\t<img class=\"showUserImg\" :src=\"userInfoForm.photoURL\"/>\n\t\t\t</label>\n\t\t\t<input id=\"file-upload\" @change=\"fileSelected\" type=\"file\"/>\n\t\t\t<div class=\"status\" style=\"display: inline-block;\">\n\t\t\t\t<div>驗證狀態：<span style=\"color:red;\">{{userInfo.emailVerified?\"已驗證\":\"未驗證\"}}</span></div>\n\t\t\t\t<div>\n\t\t\t\t\t帳號建立時間：{{creationTime}}\n\t\t\t\t</div>\n\t\t\t\t<div class=''>\n\t\t\t\t\t最後登入時間：{{lastSignInTime}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-col>\n\t  </el-row>\n\t  <el-row>\n\t\t<el-col :span=\"24\">\n\t\t\t<el-form label-width=\"80px\" :model=\"userInfoForm\" v-loading=\"isLoading\"  :rules=\"userInfoRules\" status-icon ref=\"userInfoForm\" class=\"userInfoForm\">\n\t\t\t\t<el-form-item label=\"帳號\" prop=\"email\">\n\t\t\t\t\t<el-input type=\"email\" v-model=\"userInfo.email\" auto-complete=\"off\" disabled></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"暱稱\" prop=\"displayName\">\n\t\t\t\t\t<el-input type=\"text\" placeholder=\"如果沒輸入也會更新暱稱喔！\" v-model=\"userInfoForm.displayName\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('userInfoForm')\">更新資料</el-button>\n\t\t\t\t\t<el-button type=\"info\" @click=\"resetPass(userInfo.email)\">重設密碼</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t</el-col>\n\t</el-row>\n  </div>\n</template>\n<script>\nimport {mapActions,mapGetters} from 'vuex'\nexport default {\n    data(){\n\t\tvar validateDisplayName = (rule, value, callback) => {\n            if (value.length>20) {\n                callback(new Error('名稱過長！'));\n\t\t\t} else {\n                callback();\n            }\n        };\n\t\treturn{\n\t\t\tlastSignInTime:'',\n\t\t\tcreationTime:'',\n\t\t\tuserInfoForm:{},\n\t\t\tuserInfoRules: {\n                displayName: [{ validator: validateDisplayName, trigger: \"blur\" }],\n            },\n\t\t}\n    },\n    methods:{\n        ...mapActions(['resetPassword','getUserInfo','updateUserInfo','resetPassword','userLogout']),\n        fileSelected(event){\n\t\t\tconst file = event.target.files.item(0); //取得File物件\n\t\t\tconst reader = new FileReader(); //建立FileReader 監聽 Load 事件\n\t\t\treader.addEventListener('load',this.imageLoader);\n\t\t\treader.readAsDataURL(file);\n        },\n        imageLoader(event){\n          \tthis.userInfoForm.photoURL=event.target.result;\n\t\t},\n\t\tresetPass(mail){\n\t\t\tthis.$confirm('即將發送重置密碼信件，且將返回登入畫面，是否繼續?', '提示', {\n\t\t\t\tconfirmButtonText: '確認重置密碼',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then( async () => {\n\t\t\t\tconst res = await this.resetPassword(mail);\n\t\t\t\tthis.$message({\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\tmessage: res.message\n\t\t\t\t});\n\t\t\t\tawait this.userLogout();\n\t\t\t\tthis.$router.push('/');\n\t\t\t}).catch(() => {\n\t\t\t});\n\t\t},\n        submitForm(form){\n            this.$refs[form].validate( async (valid) => {\n                if (valid) {\n                    const res = await this.updateUserInfo(this.userInfoForm); //更新個人資訊\n                    if(res==='success'){\n\t\t\t\t\t\tthis.$notify.success({\n                            title: '通知！',\n                            message: '個人資訊修改成功！'\n                        });\n                    }else{\n                        this.$notify.error({\n                            title: '通知！',\n                            message: '個人資訊修改失敗！'\n                        });\n                    }\n                } else {\n                    return false;\n                }\n            });\n\t\t},\n\t\tformateDate(time){\n\t\t\tconst date = new Date(time);\n\t\t\treturn `${date.getFullYear()}/${this.formatNum(date.getMonth()+1)}/${this.formatNum(date.getDate())} ${this.formatNum(date.getHours())}:${this.formatNum(date.getMinutes())}`;\n\t\t},\n\t\tformatNum(num){\n\t\t\tif(num>=10) {\n\t\t\t\treturn num;\n\t\t\t}else{\n\t\t\t\treturn \"0\"+num;\n\t\t\t}\n\t\t}\n    },\n    computed:{\n      \t...mapGetters(['userInfo','isLoading'])\n    },\n    async created(){\n\t  await this.getUserInfo();\n\t  this.lastSignInTime = this.formateDate(this.userInfo.metadata.lastSignInTime);\n\t  this.creationTime = this.formateDate(this.userInfo.metadata.creationTime);\n      this.userInfoForm = {\n          displayName: this.userInfo.displayName?this.userInfo.displayName:'匿名',\n          photoURL: this.userInfo.photoURL?this.userInfo.photoURL:'https://goo.gl/bydiLS'\n      }\n    }\n}\n</script>\n<style>\ninput[type=\"file\"] {\n  border:1px solid;\n    position: absolute;\n    width: 0%;\n    height: 0%;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0,0,0,0);\n    border: 0;\n}\n.custom-file-upload {\n    display: inline-block;\n    cursor: pointer;\n\tposition: relative;\n\tmargin-left: 1%;\n}\n.showUserImg{\n    border: 1px dashed rgba(204, 204, 204, 0.925);\n\tborder-radius: 10%;\n    vertical-align: middle;\n\tmax-width: 40%;\n\tmargin-left: 25%;\n}\n.custom-file-upload:hover::before{\n\tcontent: '上傳相片';\n\tposition: absolute;\n\tcolor: rgba(204, 204, 204, 0.925);\n\ttop: 40%;\n\tleft:40%;\n}\n.showUserImg:hover{\n\tborder: 1px solid rgba(14, 12, 177, 0.925);\n  \topacity: 0;\n  \ttransition-duration: 2.0s;\n}\n.userInfoForm{\n\tposition: absolute;\n\tmin-width:50%;\n\tpadding-top:1%;\n\tpadding-left:20%;\n}\n.elrow1{\n\tmargin-top:2%;\n\tmin-width:50%;\n\tmin-height:20%;\n\tpadding-left:20%;\n}\n.status{\n\tposition: absolute;\n\tpadding-top: 2%;\n\tmargin-left: -5%;\n}\n@media (min-width: 300px) and (max-width: 1024px) {\n\t.elrow1{\n\t\tfont-size: 10px;\n\t}\n\t.userInfoForm{\n\t\tmin-width:70%;\n\t\tpadding-left:0%;\n\t}\n\t.showUserImg{\n\t\tmargin-left:3%;\n\t\tmax-width: 30%;\n\t}\n\t.status{\n\t\tposition: relative;\n\t\tmargin: 5% 0 0 0;\n\t\tmargin-left:25%;\n\t\tmargin-right:1%;\n\t\tmargin-top:15%;\n\t}\n\t.custom-file-upload:hover::before{\n\t\ttop: 40%;\n\t\tleft:15%;\n\t}\n\t.custom-file-upload {\n\t\tposition: absolute;\n\t\tleft:0%;\n\t\tmargin-top:7%;\n\t}\t\n}\n@media (max-width: 390px) {\n\t.showUserImg{\n\t\tmargin-left:5%;\n\t\tmax-width: 35%;\n\t}\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/User.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userInfo_contain\"},[_c('el-row',{staticClass:\"elrow1\"},[_c('el-col',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"span\":24}},[_c('label',{staticClass:\"custom-file-upload\",attrs:{\"for\":\"file-upload\"}},[_c('img',{staticClass:\"showUserImg\",attrs:{\"src\":_vm.userInfoForm.photoURL}})]),_vm._v(\" \"),_c('input',{attrs:{\"id\":\"file-upload\",\"type\":\"file\"},on:{\"change\":_vm.fileSelected}}),_vm._v(\" \"),_c('div',{staticClass:\"status\",staticStyle:{\"display\":\"inline-block\"}},[_c('div',[_vm._v(\"驗證狀態：\"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.userInfo.emailVerified?\"已驗證\":\"未驗證\"))])]),_vm._v(\" \"),_c('div',[_vm._v(\"\\n\\t\\t\\t\\t\\t帳號建立時間：\"+_vm._s(_vm.creationTime)+\"\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{},[_vm._v(\"\\n\\t\\t\\t\\t\\t最後登入時間：\"+_vm._s(_vm.lastSignInTime)+\"\\n\\t\\t\\t\\t\")])])])],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],ref:\"userInfoForm\",staticClass:\"userInfoForm\",attrs:{\"label-width\":\"80px\",\"model\":_vm.userInfoForm,\"rules\":_vm.userInfoRules,\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"帳號\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"email\",\"auto-complete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"暱稱\",\"prop\":\"displayName\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"如果沒輸入也會更新暱稱喔！\",\"auto-complete\":\"off\"},model:{value:(_vm.userInfoForm.displayName),callback:function ($$v) {_vm.$set(_vm.userInfoForm, \"displayName\", $$v)},expression:\"userInfoForm.displayName\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.submitForm('userInfoForm')}}},[_vm._v(\"更新資料\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":function($event){_vm.resetPass(_vm.userInfo.email)}}},[_vm._v(\"重設密碼\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8901faae\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/User.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8901faae\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./User.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./User.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8901faae\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./User.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/User.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}